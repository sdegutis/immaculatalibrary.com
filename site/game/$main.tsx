export default 0;

async function getLocalFileText() {
  return new Promise<string>(resolve => {
    const button = <input type='file'>Load file</input> as HTMLInputElement;
    button.oninput = async e => {
      const text = await button.files![0]!.text();
      button.remove();
      resolve(text);
    };
    document.body.append(button);
  });
}

// const text = await getLocalFileText();

const text = `
pico-8 cartridge // http://www.pico-8.com
version 42
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000cccc0000bbbb0000eeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000cccc0000bbbb0000eeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000cccc0000bbbb0000eeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000cc000000bb000000ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000cccc0000bbbb0000eeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000cc000000bb000000ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000cc000000bb000000ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333336666666533333333044444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333336555555533b33333044444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333336555555533b33333044444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003333333365555555333b333304449940aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003333333365555555333b333304449940a0aaa00a00000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003333333365555555333333b304444440a000a00a00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333336555555533333bb304444440a000aaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333335555555533333b33044444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0008080800000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1212121212121212121212121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111111112121211111111121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111111111111111111111121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111111102111111111311121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211110111111111111111111311121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111111111110311111311121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111111111111111111111121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111111111111111111111121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111113111111111511111111111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111131111111111111111111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212111111111111111111111311111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212111111111111111113131311111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111111111111311111111111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111111111111111111111111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1211111111111111111111111111111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121412121212121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
`;

parsePico8File(text);

function parsePico8File(text: string) {
  const groups = new Map<string, string[]>();
  let group = '';

  for (const line of text.trim().split('\n')) {
    if (line.startsWith('__')) {
      group = line;
      groups.set(group, []);
    }
    else {
      groups.get(group)?.push(line);
    }
  }

  console.log(groups);
}



// const canvas = <canvas width='1400' height='900' /> as HTMLCanvasElement;
// document.body.append(canvas);


// console.log('hey')

// window.addEventListener('gamepadconnected', (e) => {
//   console.log('conn', e.gamepad.index);
// });

// window.addEventListener('gamepaddisconnected', (e) => {
//   console.log('disc', e.gamepad.index);
// });

// // setInterval(() => {
// //   const c = navigator.getGamepads()[0];
// //   console.log(navigator.getGamepads());

// //   if (!c) return;

// //   c.

// //   // // console.log((c as any).hapticActuators)

// //   // // (c as any).hapticActuators[0].pulse(1.0, 200);

// //   // c.vibrationActuator.playEffect("dual-rumble", {
// //   //   startDelay: 0,
// //   //   duration: 200,
// //   //   weakMagnitude: 1.0,
// //   //   strongMagnitude: 1.0,
// //   // });

// //   console.log(c.axes[0])
// // }, 500)
